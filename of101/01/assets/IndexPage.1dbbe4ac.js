import{r as O,c as k,h as d,g as re,s as M,Y as F,a as be,W as ge,Z as ke,w as ae,b as ye,$ as xe,z as me,a0 as _e,a1 as ie,_ as qe,G as Se,Q as Te,K as Ce}from"./index.d4544492.js";import{f as Ke,e as we,h as $e,u as ze,c as p,Q as X,g as Ee}from"./QSpinner.84b197db.js";import{a as ue,u as oe}from"./use-dark.ecfe50bc.js";function Ve(e,x){const n=O(null),h=k(()=>e.disable===!0?null:d("span",{ref:n,class:"no-outline",tabindex:-1}));function m(_){const f=x.value;_!==void 0&&_.type.indexOf("key")===0?f!==null&&document.activeElement!==f&&f.contains(document.activeElement)===!0&&f.focus():n.value!==null&&(_===void 0||f!==null&&f.contains(_.target)===!0)&&n.value.focus()}return{refocusTargetEl:h,refocusTarget:m}}const Ne={name:String};function Le(e={}){return(x,n,h)=>{x[n](d("input",{class:"hidden"+(h||""),...e.value}))}}var Ie={xs:30,sm:35,md:40,lg:50,xl:60};const Ae={...oe,...ze,...Ne,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},Be=["update:modelValue"];function Fe(e,x){const{props:n,slots:h,emit:m,proxy:_}=re(),{$q:f}=_,T=ue(n,f),b=O(null),{refocusTargetEl:w,refocusTarget:E}=Ve(n,b),N=Ke(n,Ie),$=k(()=>n.val!==void 0&&Array.isArray(n.modelValue)),V=k(()=>{const o=F(n.val);return $.value===!0?n.modelValue.findIndex(z=>F(z)===o):-1}),q=k(()=>$.value===!0?V.value>-1:F(n.modelValue)===F(n.trueValue)),u=k(()=>$.value===!0?V.value===-1:F(n.modelValue)===F(n.falseValue)),C=k(()=>q.value===!1&&u.value===!1),v=k(()=>n.disable===!0?-1:n.tabindex||0),K=k(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(n.disable===!0?" disabled":"")+(T.value===!0?` q-${e}--dark`:"")+(n.dense===!0?` q-${e}--dense`:"")+(n.leftLabel===!0?" reverse":"")),R=k(()=>{const o=q.value===!0?"truthy":u.value===!0?"falsy":"indet",z=n.color!==void 0&&(n.keepColor===!0||(e==="toggle"?q.value===!0:u.value!==!0))?` text-${n.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${o}${z}`}),D=k(()=>{const o={type:"checkbox"};return n.name!==void 0&&Object.assign(o,{".checked":q.value,"^checked":q.value===!0?"checked":void 0,name:n.name,value:$.value===!0?n.val:n.trueValue}),o}),U=Le(D),Y=k(()=>{const o={tabindex:v.value,role:e==="toggle"?"switch":"checkbox","aria-label":n.label,"aria-checked":C.value===!0?"mixed":q.value===!0?"true":"false"};return n.disable===!0&&(o["aria-disabled"]="true"),o});function L(o){o!==void 0&&(M(o),E(o)),n.disable!==!0&&m("update:modelValue",P(),o)}function P(){if($.value===!0){if(q.value===!0){const o=n.modelValue.slice();return o.splice(V.value,1),o}return n.modelValue.concat([n.val])}if(q.value===!0){if(n.toggleOrder!=="ft"||n.toggleIndeterminate===!1)return n.falseValue}else if(u.value===!0){if(n.toggleOrder==="ft"||n.toggleIndeterminate===!1)return n.trueValue}else return n.toggleOrder!=="ft"?n.trueValue:n.falseValue;return n.indeterminateValue}function Q(o){(o.keyCode===13||o.keyCode===32)&&M(o)}function G(o){(o.keyCode===13||o.keyCode===32)&&L(o)}const I=x(q,C);return Object.assign(_,{toggle:L}),()=>{const o=I();n.disable!==!0&&U(o,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const z=[d("div",{class:R.value,style:N.value,"aria-hidden":"true"},o)];w.value!==null&&z.push(w.value);const j=n.label!==void 0?we(h.default,[n.label]):$e(h.default);return j!==void 0&&z.push(d("div",{class:`q-${e}__label q-anchor--skip`},j)),d("div",{ref:b,class:K.value,...Y.value,onClick:L,onKeydown:Q,onKeyup:G},z)}}const Oe=d("div",{key:"svg",class:"q-checkbox__bg absolute"},[d("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[d("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),d("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Pe=p({name:"QCheckbox",props:Ae,emits:Be,setup(e){function x(n,h){const m=k(()=>(n.value===!0?e.checkedIcon:h.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>m.value!==null?[d("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[d(X,{class:"q-checkbox__icon",name:m.value})])]:[Oe]}return Fe("checkbox",x)}}),Qe=p({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:x,emit:n}){let h=!1,m,_,f=null,T=null,b,w;function E(){m&&m(),m=null,h=!1,f!==null&&(clearTimeout(f),f=null),T!==null&&(clearTimeout(T),T=null),_!==void 0&&_.removeEventListener("transitionend",b),b=null}function N(u,C,v){C!==void 0&&(u.style.height=`${C}px`),u.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,h=!0,m=v}function $(u,C){u.style.overflowY=null,u.style.height=null,u.style.transition=null,E(),C!==w&&n(C)}function V(u,C){let v=0;_=u,h===!0?(E(),v=u.offsetHeight===u.scrollHeight?0:void 0):(w="hide",u.style.overflowY="hidden"),N(u,v,C),f=setTimeout(()=>{f=null,u.style.height=`${u.scrollHeight}px`,b=K=>{T=null,(Object(K)!==K||K.target===u)&&$(u,"show")},u.addEventListener("transitionend",b),T=setTimeout(b,e.duration*1.1)},100)}function q(u,C){let v;_=u,h===!0?E():(w="show",u.style.overflowY="hidden",v=u.scrollHeight),N(u,v,C),f=setTimeout(()=>{f=null,u.style.height=0,b=K=>{T=null,(Object(K)!==K||K.target===u)&&$(u,"hide")},u.addEventListener("transitionend",b),T=setTimeout(b,e.duration*1.1)},100)}return be(()=>{h===!0&&E()}),()=>d(ge,{css:!1,appear:e.appear,onEnter:V,onLeave:q},x.default)}});const je=["none","strict","leaf","leaf-filtered"];var He=p({name:"QTree",props:{...oe,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>je.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(e,{slots:x,emit:n}){const{proxy:h}=re(),{$q:m}=h,_=ue(e,m),f=O({}),T=O(e.ticked||[]),b=O(e.expanded||[]);let w={};ke(()=>{w={}});const E=k(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(_.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),N=k(()=>e.selected!==void 0),$=k(()=>e.icon||m.iconSet.tree.icon),V=k(()=>e.controlColor||e.color),q=k(()=>e.textColor!==void 0?` text-${e.textColor}`:""),u=k(()=>{const l=e.selectedColor||e.color;return l?` text-${l}`:""}),C=k(()=>e.filterMethod!==void 0?e.filterMethod:(l,a)=>{const t=a.toLowerCase();return l[e.labelKey]&&l[e.labelKey].toLowerCase().indexOf(t)>-1}),v=k(()=>{const l={},a=(t,r)=>{const i=t.tickStrategy||(r?r.tickStrategy:e.tickStrategy),s=t[e.nodeKey],g=t[e.childrenKey]&&t[e.childrenKey].length>0,A=t.disabled!==!0&&N.value===!0&&t.selectable!==!1,S=t.disabled!==!0&&t.expandable!==!1,ve=i!=="none",H=i==="strict",le=i==="leaf-filtered",Z=i==="leaf"||i==="leaf-filtered";let J=t.disabled!==!0&&t.tickable!==!1;Z===!0&&J===!0&&r&&r.tickable!==!0&&(J=!1);let B=t.lazy;B===!0&&f.value[s]!==void 0&&Array.isArray(t[e.childrenKey])===!0&&(B=f.value[s]);const c={key:s,parent:r,isParent:g,lazy:B,disabled:t.disabled,link:t.disabled!==!0&&(A===!0||S===!0&&(g===!0||B===!0)),children:[],matchesFilter:e.filter?C.value(t,e.filter):!0,selected:s===e.selected&&A===!0,selectable:A,expanded:g===!0?b.value.includes(s):!1,expandable:S,noTick:t.noTick===!0||H!==!0&&B&&B!=="loaded",tickable:J,tickStrategy:i,hasTicking:ve,strictTicking:H,leafFilteredTicking:le,leafTicking:Z,ticked:H===!0?T.value.includes(s):g===!0?!1:T.value.includes(s)};if(l[s]=c,g===!0&&(c.children=t[e.childrenKey].map(y=>a(y,c)),e.filter&&(c.matchesFilter!==!0?c.matchesFilter=c.children.some(y=>y.matchesFilter):c.noTick!==!0&&c.disabled!==!0&&c.tickable===!0&&le===!0&&c.children.every(y=>y.matchesFilter!==!0||y.noTick===!0||y.tickable!==!0)===!0&&(c.tickable=!1)),c.matchesFilter===!0&&(c.noTick!==!0&&H!==!0&&c.children.every(y=>y.noTick)===!0&&(c.noTick=!0),Z))){if(c.ticked=!1,c.indeterminate=c.children.some(y=>y.indeterminate===!0),c.tickable=c.tickable===!0&&c.children.some(y=>y.tickable),c.indeterminate!==!0){const y=c.children.reduce((ne,he)=>he.ticked===!0?ne+1:ne,0);y===c.children.length?c.ticked=!0:y>0&&(c.indeterminate=!0)}c.indeterminate===!0&&(c.indeterminateNextState=c.children.every(y=>y.tickable!==!0||y.ticked!==!0))}return c};return e.nodes.forEach(t=>a(t,null)),l});ae(()=>e.ticked,l=>{T.value=l}),ae(()=>e.expanded,l=>{b.value=l});function K(l){const a=[].reduce,t=(r,i)=>{if(r||!i)return r;if(Array.isArray(i)===!0)return a.call(Object(i),t,r);if(i[e.nodeKey]===l)return i;if(i[e.childrenKey])return t(null,i[e.childrenKey])};return t(null,e.nodes)}function R(){return T.value.map(l=>K(l))}function D(){return b.value.map(l=>K(l))}function U(l){return l&&v.value[l]?v.value[l].expanded:!1}function Y(){e.expanded!==void 0?n("update:expanded",[]):b.value=[]}function L(){const l=b.value,a=t=>{t[e.childrenKey]&&t[e.childrenKey].length>0&&t.expandable!==!1&&t.disabled!==!0&&(l.push(t[e.nodeKey]),t[e.childrenKey].forEach(a))};e.nodes.forEach(a),e.expanded!==void 0?n("update:expanded",l):b.value=l}function P(l,a,t=K(l),r=v.value[l]){if(r.lazy&&r.lazy!=="loaded"){if(r.lazy==="loading")return;f.value[l]="loading",Array.isArray(t[e.childrenKey])!==!0&&(t[e.childrenKey]=[]),n("lazyLoad",{node:t,key:l,done:i=>{f.value[l]="loaded",t[e.childrenKey]=Array.isArray(i)===!0?i:[],ye(()=>{const s=v.value[l];s&&s.isParent===!0&&Q(l,!0)})},fail:()=>{delete f.value[l],t[e.childrenKey].length===0&&delete t[e.childrenKey]}})}else r.isParent===!0&&r.expandable===!0&&Q(l,a)}function Q(l,a){let t=b.value;const r=e.expanded!==void 0;if(r===!0&&(t=t.slice()),a){if(e.accordion&&v.value[l]){const i=[];v.value[l].parent?v.value[l].parent.children.forEach(s=>{s.key!==l&&s.expandable===!0&&i.push(s.key)}):e.nodes.forEach(s=>{const g=s[e.nodeKey];g!==l&&i.push(g)}),i.length>0&&(t=t.filter(s=>i.includes(s)===!1))}t=t.concat([l]).filter((i,s,g)=>g.indexOf(i)===s)}else t=t.filter(i=>i!==l);r===!0?n("update:expanded",t):b.value=t}function G(l){return l&&v.value[l]?v.value[l].ticked:!1}function I(l,a){let t=T.value;const r=e.ticked!==void 0;r===!0&&(t=t.slice()),a?t=t.concat(l).filter((i,s,g)=>g.indexOf(i)===s):t=t.filter(i=>l.includes(i)===!1),r===!0&&n("update:ticked",t)}function o(l,a,t){const r={tree:h,node:l,key:t,color:e.color,dark:_.value};return ie(r,"expanded",()=>a.expanded,i=>{i!==a.expanded&&P(t,i)}),ie(r,"ticked",()=>a.ticked,i=>{i!==a.ticked&&I([t],i)}),r}function z(l){return(e.filter?l.filter(a=>v.value[a[e.nodeKey]].matchesFilter):l).map(a=>se(a))}function j(l){if(l.icon!==void 0)return d(X,{class:"q-tree__icon q-mr-sm",name:l.icon,color:l.iconColor});const a=l.img||l.avatar;if(a)return d("img",{class:`q-tree__${l.img?"img":"avatar"} q-mr-sm`,src:a})}function ce(){n("afterShow")}function de(){n("afterHide")}function se(l){const a=l[e.nodeKey],t=v.value[a],r=l.header&&x[`header-${l.header}`]||x["default-header"],i=t.isParent===!0?z(l[e.childrenKey]):[],s=i.length>0||t.lazy&&t.lazy!=="loaded";let g=l.body&&x[`body-${l.body}`]||x["default-body"];const A=r!==void 0||g!==void 0?o(l,t,a):null;return g!==void 0&&(g=d("div",{class:"q-tree__node-body relative-position"},[d("div",{class:q.value},[g(A)])])),d("div",{key:a,class:`q-tree__node relative-position q-tree__node--${s===!0?"parent":"child"}`},[d("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(t.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(t.selected===!0?" q-tree__node--selected":"")+(t.disabled===!0?" q-tree__node--disabled":""),tabindex:t.link===!0?0:-1,onClick:S=>{te(l,t,S)},onKeypress(S){xe(S)!==!0&&(S.keyCode===13?te(l,t,S,!0):S.keyCode===32&&W(l,t,S,!0))}},[d("div",{class:"q-focus-helper",tabindex:-1,ref:S=>{w[t.key]=S}}),t.lazy==="loading"?d(Ee,{class:"q-tree__spinner",color:V.value}):s===!0?d(X,{class:"q-tree__arrow"+(t.expanded===!0?" q-tree__arrow--rotate":""),name:$.value,onClick(S){W(l,t,S)}}):null,t.hasTicking===!0&&t.noTick!==!0?d(Pe,{class:"q-tree__tickbox",modelValue:t.indeterminate===!0?null:t.ticked,color:V.value,dark:_.value,dense:!0,keepColor:!0,disable:t.tickable!==!0,onKeydown:M,"onUpdate:modelValue":S=>{fe(t,S)}}):null,d("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(t.selected===!0?u.value:q.value)},[r?r(A):[j(l),d("div",l[e.labelKey])]])]),s===!0?e.noTransition===!0?d("div",{class:"q-tree__node-collapsible"+q.value,key:`${a}__q`},[g,d("div",{class:"q-tree__children"+(t.disabled===!0?" q-tree__node--disabled":"")},t.expanded?i:null)]):d(Qe,{duration:e.duration,onShow:ce,onHide:de},()=>me(d("div",{class:"q-tree__node-collapsible"+q.value,key:`${a}__q`},[g,d("div",{class:"q-tree__children"+(t.disabled===!0?" q-tree__node--disabled":"")},i)]),[[_e,t.expanded]])):g])}function ee(l){const a=w[l];a&&a.focus()}function te(l,a,t,r){r!==!0&&a.selectable!==!1&&ee(a.key),N.value&&a.selectable?e.noSelectionUnset===!1?n("update:selected",a.key!==e.selected?a.key:null):a.key!==e.selected&&n("update:selected",a.key===void 0?null:a.key):W(l,a,t,r),typeof l.handler=="function"&&l.handler(l)}function W(l,a,t,r){t!==void 0&&M(t),r!==!0&&a.selectable!==!1&&ee(a.key),P(a.key,!a.expanded,l,a)}function fe(l,a){if(l.indeterminate===!0&&(a=l.indeterminateNextState),l.strictTicking)I([l.key],a);else if(l.leafTicking){const t=[],r=i=>{i.isParent?(a!==!0&&i.noTick!==!0&&i.tickable===!0&&t.push(i.key),i.leafTicking===!0&&i.children.forEach(r)):i.noTick!==!0&&i.tickable===!0&&(i.leafFilteredTicking!==!0||i.matchesFilter===!0)&&t.push(i.key)};r(l),I(t,a)}}return e.defaultExpandAll===!0&&L(),Object.assign(h,{getNodeByKey:K,getTickedNodes:R,getExpandedNodes:D,isExpanded:U,collapseAll:Y,expandAll:L,setExpanded:P,isTicked:G,setTicked:I}),()=>{const l=z(e.nodes);return d("div",{class:E.value},l.length===0?e.filter?e.noResultsLabel||m.lang.tree.noResults:e.noNodesLabel||m.lang.tree.noNodes:l)}}});const Me=[{label:"Node 1",children:[{label:"Node 1.1",lazy:!0},{label:"Node 1.2",lazy:!0}]},{label:"Node 2",children:[{label:"Node 2.1",lazy:!0},{label:"Node 2.2",lazy:!0},{label:"Node 2.3",lazy:!0}]}],Re={setup(){return{lazy:O(Me)}}},De={class:"q-pa-md q-gutter-sm"};function Ue(e,x,n,h,m,_){return Se(),Te("div",De,[Ce(He,{nodes:h.lazy,"default-expand-all":"","node-key":"label",onLazyLoad:e.onLazyLoad},null,8,["nodes","onLazyLoad"])])}var Ze=qe(Re,[["render",Ue]]);export{Ze as default};
